{ 
  "SelectSQL"    : [
                     { 
                       "Name" : "TeacherInfoList",
                       "SQL"  : "SELECT docenti.CHIAVE,docenti.RAGIONE_SOCIALE,docenti.EMAIL,docenti.TITOLO,docenti.INDIRIZZO,docenti.COMUNE,docenti.CAP,docenti.PROVINCIA,(SELECT province_all.NOME FROM province_all WHERE CHIAVE = docenti.PROVINCIA) AS PROVINCIA_NOME,docenti.MATERIA_1,docenti.MATERIA_2,docenti.MATERIA_3 FROM docenti {W~FiltroI~(docenti.CHIAVE IN (SELECT istituti_x_docenti.DOCENTE FROM istituti_x_docenti WHERE ISTITUTO = :FiltroI))~FiltroP~(docenti.CHIAVE IN (SELECT istituti_x_docenti.DOCENTE FROM istituti_x_docenti WHERE ISTITUTO IN (SELECT istituti.CHIAVE FROM istituti WHERE PROVINCIA = :FiltroP)))~FiltroT~(docenti.CHIAVE IN (SELECT DOCENTE FROM istituti_x_docenti WHERE ISTITUTO IN (SELECT ISTITUTO FROM classi WHERE CHIAVE IN (SELECT CLASSE FROM adozioni_titolo WHERE TITOLO=:FiltroT))))} ORDER BY docenti.RAGIONE_SOCIALE" 
                     }
                   ],
                   
  "SQLDettaglio" : [
                     { 
                       "Name" : "TeacherDettaglio",
                       "SQL"  : "SELECT docenti.*,(SELECT materie_insegnamento.DESCRIZIONE FROM materie_insegnamento WHERE materie_insegnamento.CHIAVE = docenti.MATERIA_1) AS NOME_MATERIA1,(SELECT materie_insegnamento.DESCRIZIONE FROM materie_insegnamento WHERE materie_insegnamento.CHIAVE = docenti.MATERIA_2) AS NOME_MATERIA2,(SELECT materie_insegnamento.DESCRIZIONE FROM materie_insegnamento WHERE materie_insegnamento.CHIAVE = docenti.MATERIA_3) AS NOME_MATERIA3 FROM docenti WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "TeacherInstitute",
                       "SQL"  : "SELECT istituti.CHIAVE,istituti.INDIRIZZO,istituti.CAP,istituti.COMUNE,istituti.PROVINCIA,(SELECT province.NOME FROM province WHERE province.CHIAVE = istituti.PROVINCIA) AS PROVINCIA_NOME,(SELECT province_all.CHIAVE FROM province_all WHERE NOME=(SELECT province.NOME FROM province WHERE CHIAVE = istituti.PROVINCIA)) AS PROVINCIA_LISTA_ALL,istituti.CAP,istituti.NOME AS ISTITUTO FROM istituti_x_docenti,istituti WHERE DOCENTE=:CHIAVE AND istituti.CHIAVE = istituti_x_docenti.ISTITUTO" 
                     },
                     {
                       "Name" : "TeacherLesson",
                       "SQL"  : "SELECT *,(SELECT ISTITUTO FROM classi WHERE CHIAVE = insegnamenti_docente.CLASSE) AS ISTITUTO,(SELECT classi.SEZIONE FROM classi WHERE classi.CHIAVE = insegnamenti_docente.CLASSE) AS SEZIONE,(SELECT classi.ANNO FROM classi WHERE classi.CHIAVE = insegnamenti_docente.CLASSE) AS ANNO FROM insegnamenti_docente WHERE DOCENTE=:CHIAVE"
                     },
                     {
                       "Name" : "TeacherAvailability",
                       "SQL"  : "SELECT * FROM docenti_disponibilita WHERE DOCENTE =:CHIAVE ORDER BY ISTITUTO DESC,GIORNO DESC"
                     }                     
                   ],
  
  "EditSQL"      : [  
                     {
                       "Name" : "InsertTeacher",
                       "SQL"  : "INSERT INTO docenti (CHIAVE,RAGIONE_SOCIALE,TITOLO,TEL_PRIMO,TEL_SECONDO,TEL_TERZO,EMAIL,MATERIA_1,MATERIA_2,MATERIA_3,PIATTAFORMA,INDIRIZZO,COMUNE,CAP,PROVINCIA,NOTE) VALUES (:NewKey1,#RAGIONE_SOCIALE,#TITOLO,#TEL_PRIMO,#TEL_SECONDO,#TEL_TERZO,#EMAIL,:MATERIA_1,:MATERIA_2,:MATERIA_3,#PIATTAFORMA,#INDIRIZZO,#COMUNE,#CAP,:PROVINCIA,#NOTE)"
                     },
                     {
                       "Name" : "InsertTeacherLybro",
                       "SQL"  : "INSERT INTO docenti (CHIAVE,RAGIONE_SOCIALE,TITOLO,TEL_PRIMO,TEL_SECONDO,TEL_TERZO,PIATTAFORMA,INDIRIZZO,COMUNE,CAP,PROVINCIA,LYBRO_KEY) VALUES (:NewKey1,#RAGIONE_SOCIALE,#TITOLO,#TEL_PRIMO,#TEL_SECONDO,#TEL_TERZO,#PIATTAFORMA,#INDIRIZZO,#COMUNE,#CAP,:PROVINCIA,:LYBRO_KEY)"
                     },
                     {
                       "Name" : "UpdateSubjectTeacherLybro",
                       "SQL"  : "CALL MATERIE_FROM_LYBRO(#MateriaLybro,#DocenteLKey)"
                     },
                     {
                       "Name" : "InsertInstituteTeacher",
                       "SQL"  : "INSERT INTO istituti_x_docenti (ISTITUTO,DOCENTE) VALUES (:ISTITUTO,:DOCENTE)"
                     },
                     {
                       "Name" : "InsertInstituteTeacherAfterInsert",
                       "SQL"  : "INSERT INTO istituti_x_docenti (ISTITUTO,DOCENTE) VALUES (:ISTITUTO,:NewKey1)"
                     },
                     {
                       "Name" : "InsertLesson",
                       "SQL"  : "INSERT INTO insegnamenti_docente (CHIAVE,MATERIA,CLASSE,GIORNO,ORARIO,DOCENTE) VALUES (:NewKey1,:MATERIA,:CLASSE,:GIORNO,#ORARIO,:DOCENTE)"
                     },
                     {
                       "Name" : "InsertLessonAfterInsert",
                       "SQL"  : "INSERT INTO insegnamenti_docente (CHIAVE,MATERIA,CLASSE,GIORNO,ORARIO,DOCENTE) VALUES (:NewKey2,:MATERIA,:CLASSE,:GIORNO,#ORARIO,:NewKey1)"
                     },
                     {
                       "Name" : "InsertUpdateTeacherAvailability",
                       "SQL"  : "CALL AGGIORNA_DOCENTI_DISPONIBILITA(:DocenteDisp,:IstitutoDisp,:GiornoDisp,#DaDisp,#ADisp,:PosDisp)"
                     },
                     {
                       "Name" : "InsertUpdateTeacherAvailabilityAfterInsert",
                       "SQL"  : "CALL AGGIORNA_DOCENTI_DISPONIBILITA(:NewKey1,:IstitutoDisp,:GiornoDisp,#DaDisp,#ADisp,:PosDisp)"
                     },
                     {
                       "Name" : "InsertTeacherAvailabilityAfterInsert",
                       "SQL"  : "CALL AGGIORNA_DOCENTI_DISPONIBILITA()"
                     },                     
                     {
                       "Name" : "UpdateTeacher",
                       "SQL"  : "UPDATE docenti SET RAGIONE_SOCIALE=#RAGIONE_SOCIALE,TITOLO=#TITOLO,TEL_PRIMO=#TEL_PRIMO,TEL_SECONDO=#TEL_SECONDO,TEL_TERZO=#TEL_TERZO,EMAIL=#EMAIL,MATERIA_1=:MATERIA_1,MATERIA_2=:MATERIA_2,MATERIA_3=:MATERIA_3,PIATTAFORMA=#PIATTAFORMA,INDIRIZZO=#INDIRIZZO,COMUNE=#COMUNE,CAP=#CAP,PROVINCIA=:PROVINCIA,NOTE=#NOTE WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "UpdateLesson",
                       "SQL"  : "UPDATE insegnamenti_docente SET MATERIA=:MATERIA,CLASSE=:CLASSE,GIORNO=:GIORNO,ORARIO=#ORARIO WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteTeacherDeliveryBookAll",
                       "SQL"  : "DELETE FROM dettaglio_spedizioni WHERE SPEDIZIONE IN (SELECT spedizioni.CHIAVE FROM spedizioni WHERE DOCENTE =:CHIAVE)"
                     },
                     {
                       "Name" : "DeleteTeacherDelivery",
                       "SQL"  : "DELETE FROM spedizioni WHERE DOCENTE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteTeacherLesson",
                       "SQL"  : "DELETE FROM insegnamenti_docente WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteTeacherAvailability",
                       "SQL"  : "DELETE FROM docenti_disponibilita WHERE DOCENTE=:Docente AND POSIZIONE = :Posizione AND GIORNO =:Giorno AND ISTITUTO = :Istituto"
                     },
                     {
                       "Name" : "DeleteTeacherAvailabilityAll",
                       "SQL"  : "DELETE FROM docenti_disponibilita WHERE DOCENTE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteLesson",
                       "SQL"  : "DELETE FROM insegnamenti_docente WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteLessonAll",
                       "SQL"  : "DELETE FROM insegnamenti_docente WHERE DOCENTE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteLessonAfterDeleteInstitute",
                       "SQL"  : "DELETE FROM insegnamenti_docente WHERE CLASSE IN (SELECT CHIAVE FROM classi WHERE ISTITUTO=:ISTITUTO) AND DOCENTE=:DOCENTE"
                     },                     
                     {
                       "Name" : "DeleteAvailabilityAfterDeleteInstitute",
                       "SQL"  : "DELETE FROM docenti_disponibilita WHERE ISTITUTO=:ISTITUTO AND DOCENTE=:DOCENTE"
                     },                     
                     {
                       "Name" : "DeleteInstituteTeacher",
                       "SQL"  : "DELETE FROM istituti_x_docenti WHERE DOCENTE=:DOCENTE AND ISTITUTO=:ISTITUTO"
                     },
                     {                     
                       "Name" : "DeleteInstituteTeacherAll",
                       "SQL"  : "DELETE FROM istituti_x_docenti WHERE DOCENTE=:CHIAVE"
                     },
                     {
                       "Name" : "DeleteTeacher",
                       "SQL"  : "DELETE FROM docenti WHERE CHIAVE=:CHIAVE"
                     },
                     {
                       "Name" : "UpdateDatabaseInstituteFromTeacher",
                       "SQL"  : "CALL LYBRO_AGGIORNA_ISTITUTI(#CodiceIstituto,#NomeIstituto,#IndirizzoIstituto,#ProvinciaIstituto,#ComuneIstituto,#CapIstituto,#EmailIstituto,#SitoWebIstituto,#PresideIstituto,#VicePresIstituto,#DirAmmIstituto,#Telefono1,#Referente1,#Telefono2,#Referente2,#Telefono3,#Referente3,#DocenteLybro)"
                     }                                         
                   ]        
}
